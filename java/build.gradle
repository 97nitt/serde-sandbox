plugins {
    id 'idea'
    id 'java'
    id 'java-test-fixtures'
    id 'com.github.sherter.google-java-format' version '0.8'
    id 'com.commercehub.gradle.plugin.avro' version '0.19.1'
    id "com.google.protobuf" version "0.8.12"
}

ext {
    avroVersion = '1.9.2'
    jacksonVersion = '2.11.0'
    junit4Version = '4.13'
    junit5Version = '5.6.2'
    lombokVersion = '1.18.12'
    protobufVersion = '3.12.0'
}

repositories {
    jcenter()
}

dependencies {
    // main dependencies
    implementation "com.fasterxml.jackson.core:jackson-databind:$jacksonVersion"
    implementation "com.google.protobuf:protobuf-java:$protobufVersion"
    implementation "org.apache.avro:avro:$avroVersion"

    // test fixtures dependencies
    testFixturesAnnotationProcessor "org.projectlombok:lombok:$lombokVersion"
    testFixturesCompileOnly "org.projectlombok:lombok:$lombokVersion"
    testFixturesImplementation "org.apache.avro:avro:$avroVersion"

    // test dependencies
    testImplementation "junit:junit:$junit4Version"
    testRuntimeOnly("org.junit.vintage:junit-vintage-engine:$junit5Version")
    testRuntimeOnly files('src/test/avro')
}

protobuf {
    protoc {
        artifact = "com.google.protobuf:protoc:$protobufVersion"
    }
}

test {
    useJUnitPlatform()
}
